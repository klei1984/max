<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="892px" preserveAspectRatio="none" style="width:846px;height:892px;background:none;" version="1.1" viewBox="0 0 846 892" width="846px" zoomAndPan="magnify"><defs/><g><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="360" x2="360" y1="40.2969" y2="848.4766"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="549" x2="549" y1="40.2969" y2="848.4766"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="632.5" x2="632.5" y1="40.2969" y2="848.4766"/><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.5;" width="60" x="328" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46" x="335" y="24.9951">Host 1</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.5;" width="70" x="512" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="519" y="24.9951">Client 1</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.5;" width="69" x="596" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="603" y="24.9951">Client 2</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.5;" width="60" x="328" y="848.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46" x="335" y="868.4717">Host 1</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.5;" width="70" x="512" y="848.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="56" x="519" y="868.4717">Client 1</text><rect fill="#FFFFFF" height="30.2969" style="stroke:#000000;stroke-width:1.5;" width="69" x="596" y="848.4766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="603" y="868.4717">Client 2</text><polygon fill="#000000" points="620.5,67.4297,630.5,71.4297,620.5,75.4297,624.5,71.4297" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="360" x2="626.5" y1="71.4297" y2="71.4297"/><polygon fill="#000000" points="537,65.4297,547,69.4297,537,73.4297,541,69.4297" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="360" x2="543" y1="69.4297" y2="69.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="367" y="64.3638">[IPX Broadcast] Packet 37</text><path d="M185,53.2969 L185,108.2969 L351,108.2969 L351,63.2969 L341,53.2969 L185,53.2969 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M341,53.2969 L341,63.2969 L351,63.2969 L341,53.2969 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="191" y="70.3638">[Entity ID: Host 1]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133" x="199" y="85.4966">Only if game options</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137" x="199" y="100.6294">are changed by Host.</text><polygon fill="#000000" points="620.5,136.8281,630.5,140.8281,620.5,144.8281,624.5,140.8281" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="360" x2="626.5" y1="140.8281" y2="140.8281"/><polygon fill="#000000" points="537,134.8281,547,138.8281,537,142.8281,541,138.8281" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="360" x2="543" y1="138.8281" y2="138.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="367" y="133.7622">[IPX Broadcast] Packet 32</text><path d="M18,122.6953 L18,298.6953 L351,298.6953 L351,132.6953 L341,122.6953 L18,122.6953 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M341,122.6953 L341,132.6953 L351,132.6953 L341,122.6953 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="24" y="139.7622">[Entity ID: Host 1]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="265" x="32" y="154.895">Start game. Set new Session ID and send</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="32" y="170.0278">IPX address of the host. The current</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240" x="32" y="185.1606">message still uses the old Session ID.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="227" x="32" y="200.2935">This is the last broadcast message.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="28" y="215.4263"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="296" x="24" y="230.5591">As soon as the IPX address of a peer is known</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="21" x="24" y="245.6919">the</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="117" x="49" y="245.6919">Packet Number</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="170" y="245.6919">field inside the IPX</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="268" x="24" y="260.8247">Protocol Header is post incremented after</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="312" x="24" y="275.9575">each message sent by a node to the given peer.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="28" y="291.0903"/><polygon fill="#000000" points="371,340.4219,361,344.4219,371,348.4219,367,344.4219" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="365" x2="548" y1="344.4219" y2="344.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="377" y="324.2231">[IPX Unicast] Packet 05</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="377" y="339.356">PN: 00</text><path d="M554,313.1563 L554,383.1563 L837,383.1563 L837,323.1563 L827,313.1563 L554,313.1563 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M827,313.1563 L827,323.1563 L837,323.1563 L827,313.1563 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="560" y="330.2231">[Entity ID: Host 1]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="242" x="568" y="345.356">Clients answer to Packet 32 with their</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="254" x="568" y="360.4888">own IPX addresses. The new Session ID</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="568" y="375.6216">is already used in the responses.</text><polygon fill="#000000" points="371,424.9531,361,428.9531,371,432.9531,367,428.9531" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="365" x2="631.5" y1="428.9531" y2="428.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="377" y="408.7544">[IPX Unicast] Packet 05</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="377" y="423.8872">PN: 00</text><polygon fill="#000000" points="537,469.2188,547,473.2188,537,477.2188,541,473.2188" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="360" x2="543" y1="473.2188" y2="473.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="367" y="453.02">[IPX Unicast] Packet 34</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="367" y="468.1528">PN: 00</text><path d="M39,441.9531 L39,541.9531 L351,541.9531 L351,451.9531 L341,441.9531 L39,441.9531 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M341,441.9531 L341,451.9531 L351,451.9531 L341,441.9531 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="45" y="459.02">[Entity ID: Host 1]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="290" x="45" y="474.1528">When the host received Packet 05 from each</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="269" x="45" y="489.2856">client it sends the entire IPX address table</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="283" x="45" y="504.4185">back to each client. From this point onwards</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="291" x="45" y="519.5513">clients can send unicast messages directly to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="45" y="534.6841">each other.</text><polygon fill="#000000" points="620.5,584.0156,630.5,588.0156,620.5,592.0156,624.5,588.0156" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="360" x2="626.5" y1="588.0156" y2="588.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="367" y="567.8169">[IPX Unicast] Packet 34</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="367" y="582.9497">PN: 00</text><polygon fill="#000000" points="537,628.2813,547,632.2813,537,636.2813,541,632.2813" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="360" x2="543" y1="632.2813" y2="632.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="367" y="612.0825">[IPX Unicast] Packet 13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="367" y="627.2153">PN: 01</text><path d="M10,601.0156 L10,656.0156 L351,656.0156 L351,611.0156 L341,601.0156 L10,601.0156 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M341,601.0156 L341,611.0156 L351,611.0156 L341,601.0156 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="16" y="618.0825">[Entity ID: Host 1]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="320" x="16" y="633.2153">The host generates a new RNG seed using time().</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="16" y="648.3481">Clients save it.</text><polygon fill="#000000" points="620.5,697.6797,630.5,701.6797,620.5,705.6797,624.5,701.6797" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="360" x2="626.5" y1="701.6797" y2="701.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="367" y="681.481">[IPX Unicast] Packet 13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="367" y="696.6138">PN: 01</text><polygon fill="#000000" points="537,741.9453,547,745.9453,537,749.9453,541,745.9453" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="360" x2="543" y1="745.9453" y2="745.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="367" y="725.7466">[IPX Unicast] Packet 17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="367" y="740.8794">PN: 02</text><path d="M50,714.6797 L50,784.6797 L351,784.6797 L351,724.6797 L341,714.6797 L50,714.6797 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><path d="M341,714.6797 L341,724.6797 L351,724.6797 L341,714.6797 " fill="#FFFFFF" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="56" y="731.7466">[Entity ID: Team slot ID]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260" x="56" y="746.8794">The host sends game settings to clients.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="280" x="56" y="762.0122">This concludes the game setup stage in the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="56" y="777.145">matchmaking lobby.</text><polygon fill="#000000" points="620.5,826.4766,630.5,830.4766,620.5,834.4766,624.5,830.4766" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="360" x2="626.5" y1="830.4766" y2="830.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="367" y="810.2778">[IPX Unicast] Packet 17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="42" x="367" y="825.4106">PN: 02</text><!--MD5=[2324960fd2cecd486f127150b72d3911]
@startuml
!pragma teoz true
participant "Host 1" as H1
' participant "Host 2" as H2
participant "Client 1" as C1
participant "Client 2" as C2
' participant "Client 3" as C3


H1 -> C1 & C2 : [IPX Broadcast] Packet 37

note left
[Entity ID: Host 1]
  Only if game options
  are changed by Host.
end note

H1 -> C1 & C2 : [IPX Broadcast] Packet 32

note left
[Entity ID: Host 1]
  Start game. Set new Session ID and send
  IPX address of the host. The current
  message still uses the old Session ID.
  This is the last broadcast message.

As soon as the IPX address of a peer is known
the **Packet Number** field inside the IPX
Protocol Header is post incremented after
each message sent by a node to the given peer.

end note

C1 -> H1 : [IPX Unicast] Packet 05\nPN: 00

note right
[Entity ID: Host 1]
  Clients answer to Packet 32 with their
  own IPX addresses. The new Session ID
  is already used in the responses.
end note

C2 -> H1 : [IPX Unicast] Packet 05\nPN: 00

H1 -> C1 : [IPX Unicast] Packet 34\nPN: 00

note left
[Entity ID: Host 1]
When the host received Packet 05 from each
client it sends the entire IPX address table
back to each client. From this point onwards
clients can send unicast messages directly to
each other.
end note

H1 -> C2 : [IPX Unicast] Packet 34\nPN: 00

H1 -> C1 : [IPX Unicast] Packet 13\nPN: 01

note left
[Entity ID: Host 1]
The host generates a new RNG seed using time().
Clients save it.
end note

H1 -> C2 : [IPX Unicast] Packet 13\nPN: 01


H1 -> C1 : [IPX Unicast] Packet 17\nPN: 02

note left
[Entity ID: Team slot ID]
The host sends game settings to clients.
This concludes the game setup stage in the
matchmaking lobby.
end note

H1 -> C2 : [IPX Unicast] Packet 17\nPN: 02
@enduml

@startuml
!pragma teoz true
participant "Host 1" as H1
participant "Client 1" as C1
participant "Client 2" as C2


H1 -> C1 & C2 : [IPX Broadcast] Packet 37

note left
[Entity ID: Host 1]
  Only if game options
  are changed by Host.
end note

H1 -> C1 & C2 : [IPX Broadcast] Packet 32

note left
[Entity ID: Host 1]
  Start game. Set new Session ID and send
  IPX address of the host. The current
  message still uses the old Session ID.
  This is the last broadcast message.

As soon as the IPX address of a peer is known
the **Packet Number** field inside the IPX
Protocol Header is post incremented after
each message sent by a node to the given peer.

end note

C1 -> H1 : [IPX Unicast] Packet 05\nPN: 00

note right
[Entity ID: Host 1]
  Clients answer to Packet 32 with their
  own IPX addresses. The new Session ID
  is already used in the responses.
end note

C2 -> H1 : [IPX Unicast] Packet 05\nPN: 00

H1 -> C1 : [IPX Unicast] Packet 34\nPN: 00

note left
[Entity ID: Host 1]
When the host received Packet 05 from each
client it sends the entire IPX address table
back to each client. From this point onwards
clients can send unicast messages directly to
each other.
end note

H1 -> C2 : [IPX Unicast] Packet 34\nPN: 00

H1 -> C1 : [IPX Unicast] Packet 13\nPN: 01

note left
[Entity ID: Host 1]
The host generates a new RNG seed using time().
Clients save it.
end note

H1 -> C2 : [IPX Unicast] Packet 13\nPN: 01


H1 -> C1 : [IPX Unicast] Packet 17\nPN: 02

note left
[Entity ID: Team slot ID]
The host sends game settings to clients.
This concludes the game setup stage in the
matchmaking lobby.
end note

H1 -> C2 : [IPX Unicast] Packet 17\nPN: 02
@enduml

PlantUML version 1.2021.16beta1(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>